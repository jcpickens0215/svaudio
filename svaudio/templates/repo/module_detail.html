{% extends "base.html" %}
{% load static %}

{% block title %}Module: {{ object.name }}{% endblock %}

{% block nav_active_modules %}active{% endblock %}

{% block content %}
  <h1>Module: {{ object.name }}</h1>

  <h2>Tags</h2>

  <div>
    {% for tag in object.tags.all %}
      <span class="badge badge-primary">#{{ tag.name }}</span>
    {% empty %}
      (No tags.)
    {% endfor %}
  </div>

  {% if request.user.is_authenticated %}
    <form method="post" action="{% url "repo:module-add-tag"  hash=object.file.hash %}" class="form-inline">
      {% csrf_token %}
      <div class="input-group mb-2 mr-sm-2">
        <div class="input-group-prepend">
          <div class="input-group-text">#</div>
        </div>
        <input type="text" class="form-control" id="addTagsInput" name="tags" placeholder="tag1,tag2,...">
      </div>
      <button class="btn btn-primary mb-2" type="submit">Add Tag(s)</button>
    </form>
  {% endif %}

  <h2>File details</h2>

  <ul>
    <li>Hash: {{ object.file.hash }}</li>
    <li>Size: {{ object.file.size }}</li>
    {% with object.file.media_url as media_url %}
      {% if media_url %}
        <li><a href="{{ media_url }}">Download cached copy</a></li>
      {% endif %}
    {% endwith %}
  </ul>

  {% include "repo/_found_at.html" with type="module" %}

{% endblock content %}
